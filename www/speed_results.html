<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Brython speed compared to CPython</title>
<link rel="stylesheet" href="/brython.css">
<style>
body{
    padding-left: 2em;
}
td{
    vertical-align: top;
    padding: 3px;
}
td, th{
    border-style: solid;
    border-width: 0px 0px 1px 0px;
    border-color: #000;
}
pre{
    margin: 0px 0px 0px 5px;
}
</style>
</head>
<body>
<h2>Brython 3.12.0 performance compared to CPython 3.10.12</h2>
User agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/118.0
<p>
<table>
<tr>
<th>Test</th>
<th>Brython<br>(100 = CPython)</th>
<th>Code</th>
</tr>
<tr><td>simple assignment</td><td align="right"><b>81</b></td><td><pre>for i in range(1000000):
    a = 1</pre></td></tr>
<tr><td>augmented assignment</td><td align="right"><b>59</b></td><td><pre>a = 0
for i in range(1000000):
    a  = 1</pre></td></tr>
<tr><td>augmented assignment and list append</td><td align="right"><b>677</b></td><td><pre>t = []
i = 0
while i < 100000:
    t.append(i)
    i  = 1</pre></td></tr>
<tr><td>simple assignment to float</td><td align="right"><b>82</b></td><td><pre>for i in range(1000000):
    a = 1.0</pre></td></tr>
<tr><td>big integers</td><td align="right"><b>179</b></td><td><pre>n = 60
for i in range(10000):
    2 ** n</pre></td></tr>
<tr><td>hash string</td><td align="right"><b>608</b></td><td><pre>for i in range(1000000):
    hash('abcdef')</pre></td></tr>
<tr><td>hash float</td><td align="right"><b>454</b></td><td><pre>for i in range(1000000):
    hash(86.55)</pre></td></tr>
<tr><td>build dictionary</td><td align="right"><b>368</b></td><td><pre>for i in range(1000000):
    a = {0: 0, 'a': 'a'}</pre></td></tr>
<tr><td>build dictionary 2</td><td align="right"><b>156</b></td><td><pre>d = {}
for i in range(100000):
    d[i] = i</pre></td></tr>
<tr><td>set dictionary item</td><td align="right"><b>210</b></td><td><pre>a = {0: 0}
for i in range(1000000):
    a[0] = i</pre></td></tr>
<tr><td>build set</td><td align="right"><b>932</b></td><td><pre>for i in range(1000000):
    a = {0, 2.7, "x"}</pre></td></tr>
<tr><td>build list</td><td align="right"><b>78</b></td><td><pre>for i in range(1000000):
    a = [1, 2, 3]</pre></td></tr>
<tr><td>set list item</td><td align="right"><b>96</b></td><td><pre>a = [0]
for i in range(1000000):
    a[0] = i</pre></td></tr>
<tr><td>list slice</td><td align="right"><b>195</b></td><td><pre>a = [1, 2, 3]
for i in range(100000):
    a[:]</pre></td></tr>
<tr><td>integer addition</td><td align="right"><b>88</b></td><td><pre>a, b, c = 1, 2, 3
for i in range(1000000):
    a   b   c</pre></td></tr>
<tr><td>integer   float</td><td align="right"><b>71</b></td><td><pre>a, b = 1, 2.0
for i in range(1000000):
    a   b</pre></td></tr>
<tr><td>float addition</td><td align="right"><b>92</b></td><td><pre>a, b = 1.0, 2.0
for i in range(1000000):
    a   b</pre></td></tr>
<tr><td>string addition</td><td align="right"><b>58</b></td><td><pre>a, b, c = 'a', 'b', 'c'
for i in range(1000000):
    a   b   c</pre></td></tr>
<tr><td>cast int to string</td><td align="right"><b>212</b></td><td><pre>for i in range(100000):
    str(i)</pre></td></tr>
<tr><td>create function without arguments</td><td align="right"><b>875</b></td><td><pre>for i in range(1000000):
    def f():
        pass</pre></td></tr>
<tr><td>create function, single positional argument</td><td align="right"><b>936</b></td><td><pre>for i in range(1000000):
    def f(x):
        pass</pre></td></tr>
<tr><td>create function, complex arguments</td><td align="right"><b>910</b></td><td><pre>for i in range(1000000):
    def f(x, y=1, *args, **kw):
        pass</pre></td></tr>
<tr><td>function call</td><td align="right"><b>730</b></td><td><pre>def f(x):
    return x
for i in range(1000000):
    f(i)</pre></td></tr>
<tr><td>function call, complex arguments</td><td align="right"><b>767</b></td><td><pre>def f(x, y=0, *args, **kw):
    return x
for i in range(100000):
    f(i, 5, 6, a=8)</pre></td></tr>
<tr><td>create simple class</td><td align="right"><b>114</b></td><td><pre>for i in range(10000):
    class A:
        pass</pre></td></tr>
<tr><td>create class with init</td><td align="right"><b>136</b></td><td><pre>for i in range(10000):
    class A:
        def __init__(self, x):
            self.x = x</pre></td></tr>
<tr><td>create instance of simple class</td><td align="right"><b>556</b></td><td><pre>class A:
    pass

for i in range(1000000):
    A()</pre></td></tr>
<tr><td>create instance of class with init</td><td align="right"><b>1133</b></td><td><pre>class A:
    def __init__(self):
        pass

for i in range(100000):
    A()</pre></td></tr>
<tr><td>call instance method</td><td align="right"><b>911</b></td><td><pre>class A:
    
    def f(self):
        pass

a = A()
for i in range(100000):
    a.f()</pre></td></tr>
<tr><td>set instance attribute</td><td align="right"><b>261</b></td><td><pre>class A:
    pass

a = A()
for i in range(100000):
    a.x = i</pre></td></tr>
</table>
</body>
</html>